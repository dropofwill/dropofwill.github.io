<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>Drop of Will - Initial thoughts for an MPD project</title>

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />

    <link href="../../stylesheets/main-aec3cd83.css" rel="stylesheet" type="text/css" />

    <!-- Viewport declarations -->
    <meta name="viewport" content="width=533">
    <meta name="viewport" content="initial-scale=0.6">
  </head>
  <body>
    <div class="wrapper">

    <header class="hero">
<a href="/">        <img class="logo" alt="Will Paul" src="../../images/logo-ff6fa38a.svg" />
        <!-- <h1> -->
        <!--   &#38;lambda;will.paul -->
        <!-- </h1> -->
</a>      <nav>
        <ul>
          <li class=""><a href="/">projects</a></li>
          <li class=""><a href="/posts">blog</a></li>
          <li><a href="http://github.com/dropofwill">github</a></li>
          <li><a href="http://will-paul.com/resume">resume</a></li>
        </ul>
      </nav>
    </header>

    <div class="typeset" role="main">

        <article class="article">
    <h1>Initial thoughts for an MPD project</h1>
		<p>For my Software Development in Linux class we are making one large project over the course of the class and then packaging it up for distribution at the end (probably Debian, RPM, and AUR).  This is a little bit of a paradigm shift for me personally, as for most of my projects distribution means pushing to a Heroku instance, so I’ve had to brain storm some new non-web-based projects. I’ve come up with two basic trains of thought either a better time-tracking/Freshbooks integration for taskwarrior (the current ones are all bare-bones) or any number of music/analytics ideas for the music players, specifically MPD.</p>

<p>For now I’ve decided to just review MPD, its current state, and what options are available to me in terms of wrappers (preferably Ruby wrappers, my scripting language of choice). The goal here is to just establish what the MPD landscape looks like so that I can effectively scope an 11-12 week project.</p>

<h2 id="the-music-player-daemon">The Music Player Daemon</h2>

<p>First off it’s important to establish what MPD is and isn’t. It is a music player that works with a server-client architecture. It plays music, organizes playlists, and maintains a database of music. What it isn’t is a client to play with, you need anyone of many clients to do this from ncurses-command line based players to GUI players that resemble iTunes. In this way it does one thing well and very efficiently, which is why I’ve decided to target it as the home for any music-based apps I want to create.</p>

<p>So where to start? There is extensive documentation of the C++ inner workings of <a href="http://www.musicpd.org/doc/user/">MPD here</a>. One important part of any integration with other music programs is playlist formats, MPD supports <a href="http://www.musicpd.org/doc/user/playlist_plugins.html"><code>embcue</code>, <code>m3u</code>, <code>extm3u</code>, <code>pls</code>, and <code>xspf</code></a> through a plugin system. It uses m3u by default, which is an extremely simple format consisting of only the time in seconds, the artist, the name, and the file path.</p>

<pre class="highlight plaintext"><code>#EXTM3U

#EXTINF:123, Sample artist - Sample title
~/music/sample_artist/sample_song.mp3
</code></pre>

<p>This is nice from a readability standpoint, but there is problem, it hard codes all the file paths, which makes it hard to port from one platform to another. That’s one thing that <code>.xspf</code> <a href="http://xspf.org/xspf-v1.html">tries to remedy.</a>, it uses a unique identifier (mbid from MusicBrainz for example) to resolve different file locations to the same unique identifier, here’s a basic example file:</p>

<pre class="highlight xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;playlist</span> <span class="na">version=</span><span class="s">"1"</span> <span class="na">xmlns=</span><span class="s">"http://xspf.org/ns/0/"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;trackList&gt;</span>
    <span class="nt">&lt;track&gt;</span>
      <span class="nt">&lt;title&gt;</span>Song Title<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;identifier&gt;</span>http://musicbrainz.org/track/7fe96b15-5608-430e-ad25-77a01353c5d9.html<span class="nt">&lt;/identifier&gt;</span>
      <span class="nt">&lt;location&gt;</span>music/foo.mp3<span class="nt">&lt;/location&gt;</span>
      <span class="nt">&lt;location&gt;</span>alternate/music/foo.mp3<span class="nt">&lt;/location&gt;</span>
    <span class="nt">&lt;/track&gt;</span>
  <span class="nt">&lt;/trackList&gt;</span>
<span class="nt">&lt;/playlist&gt;</span>
</code></pre>

<p>So what libraries are already out there to further investigate?</p>

<h3 id="ruby-libraries">Ruby Libraries</h3>

<p><a href="https://github.com/marcransome/Spfy">Spfy</a> - a Ruby Xspf parser (last commit 03/2014)</p>

<p><a href="https://rubygems.org/gems/xspf/versions/0.4.1.1">Xspf</a> - a Ruby Xspf parser (last commit 04/2007), source code forge is down, so this one is fairly rusty.</p>

<p>Since the .xspf spec is simple, well formed XML, is using one of these Ruby wrappers necessary? Or could I just use the great, built in XML support?</p>

<p><a href="https://github.com/robinst/taglib-ruby">taglib-ruby</a> a wrapper around the C++ library <a href="https://github.com/taglib/taglib">TagLib</a> - meta data manager for audio files (last commit 08/2014 &amp; 02/2015 respectively)</p>

<p><a href="https://github.com/archSeer/ruby-mpd">ruby-mpd</a> a ruby wrapper around MPD, which itself was the fork librmpd (last commit 12/2014)</p>

<p>[mpd_client(https://github.com/mamantoha/mpd_client) a ruby wrapper around MPD, a port of the python-mpd library (last commit 12/2014)</p>

<h3 id="other-stuff">Other Stuff</h3>

<p><a href="http://soundiiz.com">Soundiiz</a> is doing something similar to what I want to, though it seems to be completely web based and closed source, which is sad to see.</p>

<p>The web api’s for <a href="https://developer.spotify.com/web-api/endpoint-reference/">Spotify</a>, <a href="http://developer.echonest.com">Echonest</a>, <a href="http://www.last.fm/api/show/user.getTopTracks">Last.fm</a>, <a href="http://www.last.fm/api/show/user.getTopTracks">Grooveshark</a>, <a href="https://developers.google.com/youtube/v3/docs/playlists">YouTube</a>, <a href="http://www.rdio.com/developers/docs/">Rdio</a>, <a href="https://musicbrainz.org/doc/Beginners_Guide">MusicBrainz</a>, and how to resolve content between them.</p>


    <div class="article-comments">
			<div id="disqus_thread">
	
	<script async="true" src="http://dropofwill.disqus.com/embed.js" type="text/javascript"></script>
	<noscript>
		<a>(href="http://#{short_name}.disqus.com/embed.js?url=ref") View comments.</a>
	</noscript>
</div>

    </div>
  </article>

  <aside>
    <h2>Recent Articles</h2>
    <ol>
        <li>
          <a href="../pacing-and-character-in-mcconaugheys-performance-in-mud/">Pacing and character in McConaughey’s performance in Mud</a> <span>Nov 19</span>
        </li>
        <li>
          <a href="../leitmotif-in-dr-strangelove/">Leitmotif and comedic relief in Kubrick's Dr. Strangelove</a> <span>Oct 29</span>
        </li>
        <li>
          <a href="../establishing-narrative-control-in-freers-high-fidelity/">Establishing narrative control in Freer's High Fidelity</a> <span>Sep 30</span>
        </li>
        <li>
          <a href="../a-scanner-orderly-the-smart-coaster/">A Scanner Orderly: The smart coaster</a> <span>May 20</span>
        </li>
        <li>
          <a href="../rtasklib-first-release/">rtasklib first release</a> <span>May 19</span>
        </li>
        <li>
          <a href="../packaging-ruby-gems/">Packaging Ruby gems</a> <span>May 10</span>
        </li>
        <li>
          <a href="../rtasklib-update/">rtasklib update</a> <span>Apr 20</span>
        </li>
        <li>
          <a href="../playing-power-chords-on-an-arduino/">Playing power chords on an Arduino</a> <span>Apr 14</span>
        </li>
        <li>
          <a href="../rtasklib-update-ruby-and-external-tools/">rtasklib update: Ruby and external tools</a> <span>Apr  6</span>
        </li>
        <li>
          <a href="../lit-review-of-the-quantifying-the-value-of-open-source-hardware-development/">Review of: the Quantifying the Value of Open Source Hardware Development</a> <span>Mar 31</span>
        </li>
    </ol>

    <h2>Tags</h2>
    <ol class="columnize">
        <li><a href="/tags/linuxdev/">LinuxDev (11)</a></li>
        <li><a href="/tags/task_time/">task_time (4)</a></li>
        <li><a href="/tags/physical-computing/">Physical Computing (5)</a></li>
        <li><a href="/tags/bizleg/">BizLeg (15)</a></li>
        <li><a href="/tags/arduino/">Arduino (5)</a></li>
        <li><a href="/tags/hfoss/">HFOSS (4)</a></li>
        <li><a href="/tags/bugfix/">Bugfix (1)</a></li>
        <li><a href="/tags/javascript/">JavaScript (3)</a></li>
        <li><a href="/tags/c/">C (1)</a></li>
        <li><a href="/tags/data-viz/">Data Viz (3)</a></li>
        <li><a href="/tags/ruby/">Ruby (14)</a></li>
        <li><a href="/tags/middleman/">Middleman (3)</a></li>
        <li><a href="/tags/blog/">Blog (2)</a></li>
        <li><a href="/tags/deployment/">Deployment (1)</a></li>
        <li><a href="/tags/film/">Film (3)</a></li>
        <li><a href="/tags/cinematography/">Cinematography (1)</a></li>
        <li><a href="/tags/review/">Review (10)</a></li>
        <li><a href="/tags/trademark/">Trademark (2)</a></li>
        <li><a href="/tags/d3/">D3 (1)</a></li>
        <li><a href="/tags/legal/">Legal (1)</a></li>
        <li><a href="/tags/licenses/">Licenses (1)</a></li>
        <li><a href="/tags/econ/">Econ (2)</a></li>
        <li><a href="/tags/wearables/">Wearables (2)</a></li>
        <li><a href="/tags/mouse-rat/">Mouse Rat (2)</a></li>
        <li><a href="/tags/vim/">Vim (3)</a></li>
        <li><a href="/tags/config/">Config (3)</a></li>
        <li><a href="/tags/business/">Business (1)</a></li>
        <li><a href="/tags/rtasklib/">rtasklib (7)</a></li>
        <li><a href="/tags/foss/">FOSS (1)</a></li>
        <li><a href="/tags/remix/">Remix (2)</a></li>
        <li><a href="/tags/patents/">Patents (1)</a></li>
        <li><a href="/tags/ip/">IP (1)</a></li>
        <li><a href="/tags/processing/">Processing (1)</a></li>
        <li><a href="/tags/nlp/">NLP (2)</a></li>
        <li><a href="/tags/semantics/">Semantics (2)</a></li>
        <li><a href="/tags/video/">Video (1)</a></li>
        <li><a href="/tags/talk/">Talk (1)</a></li>
        <li><a href="/tags/functional-programming/">Functional Programming (1)</a></li>
        <li><a href="/tags/python/">Python (1)</a></li>
    </ol>

    <h2>By Year</h2>
    <ol>
        <li><a href="/2015/">2015 (28)</a></li>
        <li><a href="/2014/">2014 (16)</a></li>
    </ol>
  </aside>


    </div>
  </div>
  </body>
</html>
